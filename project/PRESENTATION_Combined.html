<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EV Charging Prediction: A Practical Journey</title>
    <style>
      /* ROBUST PDF LAYOUT - GUARANTEED SINGLE PAGE */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      body {
        font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
        background: #1a1a1a; /* Dark for editing */
        color: #333;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px;
        gap: 40px;
      }

      /* Slide Container */
      .slide {
        background: white;
        /* LOGICAL DIMENSIONS (Ratio 16:9) */
        width: 1280px; 
        aspect-ratio: 16/9;
        /* No fixed height in px for body to avoid overflow, let content dictate or fit */
        height: 720px; 
        
        position: relative;
        overflow: hidden; /* Crucial: Cut off anything that spills */
        
        display: flex;
        flex-direction: column;
        padding: 50px 70px;
        
        box-shadow: 0 0 50px rgba(0,0,0,0.5);
        page-break-after: always; /* Force new page */
        break-after: always;
      }

      /* PRINT OVERRIDES - THE CRITICAL FIX */
      @media print {
        @page {
          size: 297mm 210mm; /* A4 Landscape */
          margin: 0 !important;
        }

        body {
          display: block !important; /* CRITICAL: DISABLE FLEX FOR PRINT */
          margin: 0 !important;
          padding: 0 !important;
          background: none !important;
          width: 297mm;
          min-height: 210mm;
        }

        .slide-container {
             display: block !important;
        }

        .slide {
          width: 297mm !important;
          height: 210mm !important;
          margin: 0 !important;
          padding: 10mm 15mm !important; 
          
          page-break-after: always !important;
          break-after: always !important;
          page-break-inside: avoid !important;
          break-inside: avoid !important;
          
          box-shadow: none !important;
          border: none !important;
          border-radius: 0 !important;
          zoom: 1; 

          display: flex !important;
          flex-direction: column;
          overflow: hidden !important;
        }
        
        .progress-container { display: none !important; }
      }

      /* Typography & Content */
      /* H1 is now removed/hidden in favor of H2 as main title to save space */
      h1 { display: none; } 
      
      /* H2 becomes the new Slide Title */
      h2 { 
        color: #2c3e50; 
        font-size: 2.4em; 
        margin-bottom: 25px; 
        font-weight: 700;
        border-bottom: 4px solid #3498db; 
        padding-bottom: 10px;
        margin-top: 0;
      }
      
      h3 { color: #3498db; font-size: 1.6em; margin: 20px 0 15px 0; }
      p, li, td { font-size: 1.3em; line-height: 1.5; color: #444; }
      
      /* Image Handling */
      .flex-image-container {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 0;
        margin: 10px 0; /* Reduced margin */
      }
      img { max-width: 100%; max-height: 100%; object-fit: contain; }

      /* Components */
      .title-slide { text-align: center; justify-content: center; border-bottom: 10px solid #2c3e50; }
      .title-slide h1 { display: block; border: none; font-size: 4.5em; margin-bottom: 20px; border-bottom: 0; padding-bottom: 0;} /* Keep H1 for Title Slide only */
      
      .comparison-table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 20px 0; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
      .comparison-table th { background: #2c3e50; color: white; padding: 18px; text-align: left; font-weight: 600; letter-spacing: 0.5px; }
      .comparison-table td { padding: 18px; border-bottom: 1px solid #eee; background: white; transition: background 0.2s; }
      .comparison-table tr:last-child td { border-bottom: none; }
      .comparison-table tr:hover td { background: #f8f9fa; }
      
      .info-box { background: #f8f9fa; border-left: 6px solid #2c3e50; padding: 25px; border-radius: 6px; margin: 20px 0; }
      .info-box h4 { font-size: 1.3em; margin-bottom: 10px; color: #2c3e50; text-transform: uppercase; }

      .metrics-grid, .insight-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin: 30px 0; }
      .metric-card, .insight-card { background: white; border: 1px solid #ddd; padding: 25px; border-radius: 12px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
      .insight-card { border-top: 5px solid #3498db; text-align: left; }
      
      .metric-value { font-size: 3em; font-weight: 800; margin: 10px 0; color: #2c3e50; }
      .good-result { color: #27ae60; } 
      .bad-result { color: #c0392b; }

      /* UI */
      .progress-container { position: fixed; top: 0; left: 0; width: 100%; height: 6px; background: rgba(255,255,255,0.1); }
      .progress-bar { height: 100%; background: #3498db; width: 0%; transition: width 0.3s ease; }
    </style>
  </head>

  <body>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <div class="slide-container">
      <div class="slide title-slide">
        <h1>EV Charging Prediction</h1>
        <p style="font-size: 1.8em; margin-top: 30px">
          Pattern Recognition & Data-Driven Decision Making
        </p>
        <p style="font-size: 1.2em; margin-top: 50px">
          January 15, 2026 | Cyril Steger
        </p>
      </div>

      <!-- EV ADOPTION CONTEXT -->
      <!-- EV ADOPTION CONTEXT -->
      <div class="slide">
        <!-- H1 Removed -->
        <h2>Norway Leads Global E-Mobility Revolution</h2>
        <div class="flex-image-container" style="flex: 2; margin-top: 65px;">
          <img
            src="../project/norway_project/fig/statista.jpeg"
            alt="Norway EV Adoption Trends"
            style="
              border-radius: 8px;
              box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
              max-height: 550px; /* Force larger image usage */
            "
          />
        </div>
        <p
          style="
            text-align: center;
            margin-top: 20px;
            font-size: 1.1em;
            color: #666;
          "
        >
          <strong
            >2022: 79% BEV + 87.8% BEV+PHEV of new car registrations</strong
          >
          <br>
          Source: <a href="https://www.weforum.org/stories/2023/01/norway-electric-vehicle-energy-transport/">WeForum (2023)</a>
        </p>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Why EV Charging Prediction Matters</h2>

        <h3>Norway's Electric Vehicle Leadership</h3>
        <table class="comparison-table">
          <tr>
            <th>Metric</th>
            <th>Value</th>
            <th>Significance</th>
          </tr>
          <tr>
            <td><strong>EV Market Share (2022)</strong></td>
            <td>79% of new registrations</td>
            <td>Highest in the world</td>
          </tr>
          <tr>
            <td><strong>Government Support</strong></td>
            <td>Tax incentives & subsidies</td>
            <td>Accelerates adoption</td>
          </tr>
          <tr>
            <td><strong>Energy Source</strong></td>
            <td>100% renewable electricity</td>
            <td>Truly sustainable transport</td>
          </tr>
          <tr>
            <td><strong>Public Charging Stations</strong></td>
            <td>22,000+ across Norway</td>
            <td>Infrastructure ready</td>
          </tr>
        </table>
      </div>

      <!-- COMBINED: PROBLEM AND DATASET CHARACTERISTICS -->
      <div class="slide">
        <!-- H1 Removed -->
        <h2>The Core Prediction Problem</h2>
        
        <div style="display: flex; gap: 40px; margin-top: 20px;">
            <div style="flex: 1;">
                 <h3 style="margin-top: 0">The Objective</h3>
                 <div class="info-box" style="margin-top: 15px;">
                  <p>
                    <strong>Goal:</strong> Predict chaotic charging durations prior to session start.
                  </p>
                  <p style="margin-top: 15px">
                    <strong>Challenge:</strong> Duration is driven by human behavior (parking need), not just battery physics (charging need). Values range from 15 min to 200+ hours.
                  </p>
                </div>
            </div>
            
            <div style="flex: 1;">
                <h3 style="margin-top: 0">Dataset Characteristics</h3>
                <table class="comparison-table" style="margin-top: 15px; font-size: 0.9em;">
                  <tr>
                    <th>Category</th>
                    <th>Variables</th>
                    <th>Description</th>
                  </tr>
                  <tr>
                    <td><strong>Temporal</strong></td>
                    <td>4</td>
                    <td>Hour (sin/cos), Weekday, Month</td>
                  </tr>
                  <tr>
                    <td><strong>Charging</strong></td>
                    <td>3</td>
                    <td>Power, Energy, Capacity</td>
                  </tr>
                  <tr>
                    <td><strong>Weather</strong></td>
                    <td>5</td>
                    <td>Temp, Rain, Wind, Cloud, Solar</td>
                  </tr>
                </table>
            </div>
        </div>
      </div>

      <!-- NEW SLIDE 5: DATASET DEEP DIVE / STATISTICS -->
      <div class="slide">
        <h2>Trondheim Dataset Statistics</h2>
        
        <div style="display: flex; gap: 40px; align-items: flex-start;">
            <div style="flex: 1;">
                <h3>The Idle Time Paradox</h3>
                 <div class="info-box">
                  <p>Long sessions (>24h) consume <em>less</em> energy than short ones.</p>
                  <ul style="margin-top: 10px; padding-left: 20px">
                    <li><strong>Short Sessions (<24h):</strong> 12.98 kWh avg</li>
                    <li><strong>Long Sessions (>24h):</strong> 11.95 kWh avg</li>
                  </ul>
                  <p style="margin-top: 10px; font-style: italic; font-size: 0.9em;">
                     "Time Plugged In" is a social behavior.
                  </p>
                </div>
            </div>
            <div style="flex: 1;">
                <h3>Data Distribution</h3>
                <div class="insight-card">
                    <p style="font-size: 1.1em; color: #c0392b; font-weight: bold;">Extreme Imbalance</p>
                    <ul style="margin-top: 15px; padding-left: 20px; text-align: left;">
                        <li style="margin-bottom: 10px"><strong>93% of sessions</strong> are "short" (< 24 hours).</li>
                        <li style="margin-bottom: 10px"><strong>Only 3.9%</strong> of sessions exceed 40 hours.</li>
                        <li><strong>Standard Deviation:</strong> Massive (High variance in long tail).</li>
                    </ul>
                </div>
            </div>
        </div>
        <p style="margin-top: 30px; text-align: center; font-size: 0.9em; color: #888;">
            Source: <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC11404051/#bib0009" target="_blank">PMC11404051 (2024)</a>
        </p>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Neural Networks on Limited Data</h2>

        <div class="info-box">
          <div
            style="
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              align-items: center;
            "
          >
            <div>
              <h4 style="margin-bottom: 5px">Data Context</h4>
              <p style="font-size: 1.1em; margin: 0;">
                6,880 sessions | 97 unique users
              </p>
              <p style="font-size: 0.9em; color: #666;">
                Real-world residential noise
              </p>
            </div>
            <div style="border-left: 2px solid #ddd; padding-left: 20px;">
              <h4 style="margin-bottom: 5px">Model Configuration</h4>
              <p style="font-size: 1.05em; margin: 0;">
                <strong>Loss:</strong> Huber (Robust to Outliers)
              </p>
              <p style="font-size: 1.05em; margin: 4px 0;">
                <strong>Reg:</strong> Dropout (0.4) + L2 Decay
              </p>
              <p style="font-size: 1.05em; margin: 0;">
                <strong>Batch Size:</strong> 32
              </p>
            </div>
          </div>
        </div>

        <h3>The Disappointment</h3>
        <div class="flex-image-container" style="flex: 2;">
          <img
            src="trondheim_project/fig/modeling_regularized/short_regression_pred_vs_actual_v2.png"
            alt="Trondheim Regression Failure - Predictions vs Actual"
            style="
              border-radius: 8px;
              box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
              max-height: 420px;
            "
          />
        </div>
      </div>

      <!-- TRONDHEIM APPROACH PART 2 -->
      <div class="slide">
        <!-- H1 Removed -->
        <h2>Analyzing the Prediction Failure</h2>
        <table class="comparison-table">
          <tr>
            <th>Duration Range</th>
            <th>Sessions (%)</th>
            <th>NN Prediction Result</th>
            <th>Status</th>
          </tr>
          <tr>
            <td><strong>0 - 20 hours</strong></td>
            <td>89.4% (4,826)</td>
            <td>✅ Predicted well</td>
            <td>Good</td>
          </tr>
          <tr>
            <td><strong>20 - 40 hours</strong></td>
            <td>6.7% (362)</td>
            <td>⚠️ Predictions uncertain</td>
            <td>Degrading</td>
          </tr>
          <tr>
            <td><strong>40+ hours</strong></td>
            <td>3.9% (209)</td>
            <td>
              <span class="highlight-red"
                >Predicted 27-35h regardless of actual 40-187h</span
              >
            </td>
            <td>Failed</td>
          </tr>
        </table>

        <div class="info-box">
          <h4>The Verdict</h4>
          <ul>
             <li><strong>Actual:</strong> 40-187 hours | <strong>Predicted:</strong> 27-35 hours</li>
             <li><strong>Root Cause:</strong> Neural Network regresses to the mean because it lacks sufficient samples (only ~200) in the long-tail to learn the pattern.</li>
          </ul>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Trondheim Results & Improvement</h2>
        
        <!-- Moved Benchmark Results Here -->
        <h3 style="margin-top: 0;">Benchmark Comparison</h3>
        <div class="metrics-grid" style="margin: 20px 0;">
            <div class="metric-card">
                <div class="metric-label">LightGBM</div>
                <div class="metric-value good-result">0.84</div>
                <p>Benchmark R²</p>
            </div>
            <div class="metric-card">
                <div class="metric-label">MLP V4</div>
                <div class="metric-value bad-result">0.33</div>
                <p>Neural Net R²</p>
            </div>
            <div class="metric-card">
                <div class="metric-label">Gap</div>
                <div class="metric-value bad-result">-0.51</div>
                <p>Massive Underperformance</p>
            </div>
        </div>

        <div style="display: flex; gap: 30px; align-items: center; margin-top: 20px; flex: 1.5;">
            <div style="flex: 1">
                 <h3>Improvement Attempt</h3>
                 <p style="font-size: 0.9em;">We tried deepening the network (MLP V4), adding regularization, and focal loss.</p>
                 <ul style="font-size: 0.9em; margin-top: 10px;">
                    <li>Baseline R²: 0.115</li>
                    <li>V4 R²: 0.330 (+27.5%)</li>
                 </ul>
                 <p style="font-size: 0.9em; font-weight: bold; margin-top: 10px; color: #c0392b;">Result: Still fails vs Trees.</p>
            </div>
            <div style="flex: 1.5; display: flex; justify-content: center; height: 100%; align-items: center;">
                 <img
                    src="trondheim_project/fig/modeling_regularized/mlp_v4_improvement.png"
                    alt="MLP V4 Improvement"
                    style="width: 100%; max-height: 550px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); object-fit: contain;"
                  />
            </div>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>When Neural Networks Fail</h2>

        <div class="info-box">
            <h4>Insight</h4>
            <p>On small, tabular datasets (6k rows), classical Machine Learning models vastly <strong>outperform</strong> Deep Learning.</p>
        </div>

        <h3>Model Comparison (Trondheim)</h3>
        <table class="comparison-table">
          <tr>
            <th>Model Type</th>
            <th>Approach</th>
            <th>Result</th>
          </tr>
          <tr>
            <td><strong>Neural Net (MLP V4)</strong></td>
            <td>Regression (Huber Loss)</td>
            <td><strong>R² = 0.330</strong> (Noisy)</td>
          </tr>
          <tr>
            <td><strong>Random Forest</strong></td>
            <td>Regression</td>
            <td><strong class="good-result">R² = 0.835</strong> (Robust)</td>
          </tr>
          <tr>
            <td><strong>LightGBM</strong></td>
            <td>Gradient Boosting</td>
            <td><strong class="good-result">R² = 0.840</strong> (SOTA)</td>
          </tr>
        </table>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Norway Dataset Overview</h2>

        <div class="info-box">
          <h4>Key Characteristics</h4>
          <ul style="padding-left: 20px;">
            <li><strong>Scale:</strong> 34,142 sessions (5x larger than Trondheim - 6,880).</li>
            <li><strong>Duration:</strong> Data collected over a 12-month period (2020/2021).</li>
            <li><strong>Location:</strong> Multiple residential garages in Oslo & Viken.</li>
            <li><strong>Quality:</strong> 99% clean data, minimal outliers, high consistency.</li>
            <li><strong>Features:</strong> 41 engineered inputs including User History, Seasonal factors, and Grid Load.</li>
          </ul>
          <p style="margin-top: 20px; font-size: 0.8em; color: #888;">
            Source: <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC11404051/#bib0009" target="_blank">PMC11404051 (2024) - Smart Charging Optimization</a>
          </p>
        </div>
      </div>

      <!-- NEW SEPARATE SLIDE FOR IMAGE -->
      <div class="slide">
          <h2>Norway Data Distribution</h2>
          <div class="flex-image-container" style="flex: 1; margin: 0;">
              <img
                src="norway_project/outputs/01_data_distributions.png"
                alt="Norway Data Distributions"
                style="
                  max-height: 550px; 
                  border-radius: 8px;
                  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
                "
              />
          </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Norway Success: Data Comparison</h2>

        <h3>Scale Comparison</h3>
        <table class="comparison-table">
          <tr>
            <th>Aspect</th>
            <th>Trondheim</th>
            <th>Norway</th>
            <th>Improvement</th>
          </tr>
          <tr>
            <td><strong>Sessions</strong></td>
            <td>6,880</td>
            <td><strong class="good-result">34,142</strong></td>
            <td>5.0×</td>
          </tr>
          <tr>
            <td><strong>Users</strong></td>
            <td>97</td>
            <td><strong class="good-result">261</strong></td>
            <td>2.7×</td>
          </tr>
          <tr>
            <td><strong>Data Quality</strong></td>
            <td>~80% clean</td>
            <td><strong class="good-result">~99% clean</strong></td>
            <td>Significant</td>
          </tr>
        </table>
      </div>

      <!-- NEW SEPARATE SLIDE FOR NN RESULTS -->
      <div class="slide">
        <h2>Neural Network Results (Norway)</h2>
        
        <h3 style="margin-top: 10px">Performance Metrics</h3>
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-label">LightGBM</div>
            <div class="metric-value good-result">0.84</div>
            <p>R² Benchmark</p>
          </div>
          <div class="metric-card">
            <div class="metric-label">Neural Network</div>
            <div class="metric-value good-result">0.86+</div>
            <p>R² (Energy)</p>
          </div>
          <div class="metric-card">
            <div class="metric-label">AUC</div>
            <div class="metric-value good-result">0.97+</div>
            <p>Classification</p>
          </div>
        </div>

        <div class="info-box">
          <h4>The Verdict</h4>
          <p>The exact same Neural Network architecture that failed on Trondheim (R²=0.33) succeeded on Norway (R²=0.85).</p> 
          <p style="margin-top: 10px"><strong>Conclusion:</strong> Data quality and scale are the primary drivers of Deep Learning success.</p>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Scientific Rigor: Ensuring Integrity</h2>

        <div class="info-box" style="margin-bottom: 20px;">
            <h4>Mathematical Guardians</h4>
            <p>To ensure our model learns robust signals and not just noise, we employ <strong>L2 Regularization</strong> (weight penalties) and enforce <strong>Gaussian Weight Distributions</strong>. This prevents overfitting on the long-tail edge cases.</p>
        </div>

        <div style="display: flex; gap: 30px; margin-top: 20px; flex: 1.5;">
            <div style="flex: 1; text-align: center;">
                <h3 style="font-size: 1.1em; color: #444;">Weight Distribution</h3>
                <img src="norway_project/outputs/weight_distribution.png" alt="Weight Distribution" style="width: 100%; max-height: 350px; object-fit: contain; border-radius: 4px; border: 1px solid #eee;">
                <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Perfectly Centered Gaussian</p>
            </div>
            <div style="flex: 1; text-align: center;">
                <h3 style="font-size: 1.1em; color: #444;">Feature Sensitivity</h3>
                <img src="norway_project/outputs/sensitivity_analysis.png" alt="Sensitivity Analysis" style="width: 100%; max-height: 350px; object-fit: contain; border-radius: 4px; border: 1px solid #eee;">
                <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Verified Signal Importance</p>
            </div>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Statistical Evidence: Beyond Single-Split Luck</h2>

        <div style="display: flex; gap: 30px; margin-top: 10px; flex: 1.5;">
            <div style="flex: 1; text-align: center;">
                <h3 style="font-size: 1.1em; color: #444;">Stability (5-Fold CV)</h3>
                <img src="norway_project/outputs/cv_stability.png" alt="CV Stability" style="width: 100%; max-height: 350px; object-fit: contain; border-radius: 4px; border: 1px solid #eee;">
                <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Consistency across data partitions</p>
            </div>
            <div style="flex: 1; text-align: center;">
                <h3 style="font-size: 1.1em; color: #444;">Learning Curve</h3>
                <img src="norway_project/outputs/learning_curve.png" alt="Learning Curve" style="width: 100%; max-height: 350px; object-fit: contain; border-radius: 4px; border: 1px solid #eee;">
                <p style="font-size: 0.85em; color: #666; margin-top: 5px;">Proving the need for $N > 20,000$</p>
            </div>
        </div>

        <div class="insight-card" style="margin-top: 15px;">
            <p><strong>Conclusion:</strong> The Learning Curve shows the exact point where Trondheim failed and Norway succeeded. NN performance is a function of data scale.</p>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Behavioral Signal Discovery</h2>

        <div style="display: flex; flex-direction: column; align-items: center; margin-top: 0px;">
            <img src="norway_project/outputs/behavioral_correlations.png" alt="Behavioral Correlations" style="width: 70%; border-radius: 4px; border: 1px solid #eee;">
            <div class="insight-card" style="width: 80%; margin-top: 0px;">
                <p>The <strong>Signal Map</strong> shows high correlation between engineered user-history features and energy usage. This "Behavioral DNA" is what enables the high R² of 0.86+.</p>
            </div>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Feature Engineering: Capturing Behavior Patterns</h2>

        <h3>The Idea</h3>
        <p style="font-size: 1.05em; margin-bottom: 20px">
          Each user has consistent charging habits. Some always charge 10-15
          kWh. Others charge 30-40 kWh. By capturing this pattern, we help the neural network predict session outcomes.
        </p>
        
        <h3>The Mathematical Formula</h3>
        <div
          style="
            background: #f5f5f5;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
          "
        >
          <p style="font-family: monospace; font-size: 0.9em; margin: 0;">
            <strong>user_avg_energy = mean(energy_session) for all sessions by that user</strong>
          </p>
        </div>
        
        <div class="success-box">
          <p>
            <strong>Impact:</strong> This single feature improves prediction
            accuracy by ~5% because it reduces noise and captures user-level
            patterns.
          </p>
        </div>
      </div>

      <!-- FEATURE ENGINEERING PART 2 -->
      <div class="slide">
        <!-- H1 Removed -->
        <h2>Feature Engineering: Implementation</h2>

        <div style="transform: scale(0.92); transform-origin: top center;">
          <h3 style="margin-top: 5px; font-size: 1.2em;">Example Calculation</h3>
          <table class="comparison-table" style="font-size: 0.85em;">
            <tr>
              <th>User</th>
              <th>Session 1</th>
              <th>Session 2</th>
              <th>Average (Feature)</th>
            </tr>
            <tr>
              <td><strong>User A</strong></td>
              <td>12.5 kWh</td>
              <td>11.8 kWh</td>
              <td><strong>12.15 kWh</strong></td>
            </tr>
            <tr>
              <td><strong>User B</strong></td>
              <td>35.2 kWh</td>
              <td>36.1 kWh</td>
              <td><strong>35.65 kWh</strong></td>
            </tr>
          </table>

          <h3 style="margin-top: 10px; font-size: 1.2em;">Implementation in Python</h3>
          <div
            style="
              background: #1e1e1e;
              color: #d4d4d4;
              padding: 10px;
              border-radius: 8px;
              font-family: monospace;
              font-size: 0.8em;
              overflow: hidden;
            "
          >
            <pre style="margin: 0; white-space: pre-wrap">
# Calculate average energy per user
user_avg_energy = df.groupby('user_id')['energy_session'].mean()
df['user_avg_energy'] = df['user_id'].map(user_avg_energy)

# Result:
print(df[['user_id', 'energy_session', 'user_avg_energy']].head(2))
#   user_id  energy_session  user_avg_energy
# 0   user_1           15.2             12.5</pre>
          </div>

          <h3 style="margin-top: 10px; font-size: 1.2em;">Why This Helps Neural Networks</h3>
          <div class="success-box" style="padding: 10px; margin-top: 5px;">
            <p style="margin: 0 0 5px 0;">
              <strong>Domain Insight:</strong> Users with larger average energy
              tend to have longer sessions and park longer.
            </p>
            <p style="margin: 0 0 5px 0;">
              <strong>Network Benefit:</strong> Instead of learning user patterns
              from scratch, the network gets a direct clue about that user's
              typical behavior.
            </p>
            <p style="margin: 0;">
              <strong>Impact:</strong> Improves prediction accuracy by ~5% by capturing user-level behavioral DNA.
            </p>
          </div>
        </div>
      </div>

      <!-- NEURAL NETWORK RESULTS: NORWAY ENERGY REGRESSION -->
      <div class="slide">
        <!-- H1 Removed -->
        <h2>Energy Regression Results (Norway)</h2>

        <div class="flex-image-container" style="flex: 2;">
          <img
            src="norway_project/outputs/05_energy_regression_results.png"
            alt="Norway Energy Regression Results"
            style="
              border-radius: 8px;
              box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
              max-height: 500px;
            "
          />
        </div>
        <div
          style="
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
          "
        >
          <div
            style="
              background: #e8f5e9;
              padding: 15px;
              border-radius: 8px;
              border-left: 4px solid #4caf50;
            "
          >
            <p style="margin: 0; font-size: 0.9em">
              <strong>Convergence:</strong> Clean train/val loss curves indicate
              good generalization
            </p>
          </div>
          <div
            style="
              background: #e8f5e9;
              padding: 15px;
              border-radius: 8px;
              border-left: 4px solid #4caf50;
            "
          >
            <p style="margin: 0; font-size: 0.9em">
              <strong>Accuracy:</strong> R² = 0.8614, predictions closely track
              actual energy
            </p>
          </div>
        </div>
      </div>

      <!-- NORWAY: CLASSIFICATION RESULTS -->
      <div class="slide">
        <!-- H1 Removed -->
        <h2>Norway Classification Results</h2>

        <div class="flex-image-container" style="flex: 2;">
          <img
            src="norway_project/outputs/04_classification_results.png"
            alt="Norway Classification Performance"
            style="
              border-radius: 8px;
              box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
              max-height: 500px;
            "
          />
        </div>

        <div
          style="
            margin-top: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
          "
        >
          <div
            style="
              background: #e8f5e9;
              padding: 15px;
              border-radius: 8px;
              border-left: 4px solid #4caf50;
            "
          >
            <p style="margin: 0; font-size: 0.9em">
              <strong>AUC: 0.9721</strong> — High discriminative power for long vs short sessions.
            </p>
          </div>
          <div
            style="
              background: #e8f5e9;
              padding: 15px;
              border-radius: 8px;
              border-left: 4px solid #4caf50;
            "
          >
            <p style="margin: 0; font-size: 0.9em">
              <strong>Recall: 70%</strong> — 55% improvement in identifying overnight stays vs Trondheim.
            </p>
          </div>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Best Case Scenario: Performance Overview</h2>
        
        <!-- COMPACT LAYOUT CONTAINER -->
        <div style="transform: scale(0.95); transform-origin: top center;">
            <div class="info-box" style="margin: 10px 0; padding: 15px;">
              <div
                style="
                  display: grid;
                  grid-template-columns: 1fr 1fr;
                  gap: 20px;
                  align-items: center;
                "
              >
                <div>
                  <h3 style="color: #2c3e50; margin-bottom: 10px; font-size: 1.3em;">
                    Classification Task
                  </h3>
                  <div
                    style="
                      background: white;
                      padding: 15px;
                      border-radius: 8px;
                      border: 2px solid #4caf50;
                    "
                  >
                    <p style="font-size: 1.2em; margin: 5px 0">
                      <strong>AUC: 0.9721</strong>
                    </p>
                    <p style="font-size: 0.85em; color: #666">
                      Predicting long vs short sessions
                    </p>
                  </div>
                </div>
                <div>
                  <h3 style="color: #2c3e50; margin-bottom: 10px; font-size: 1.3em;">
                    Energy Regression Task
                  </h3>
                  <div
                    style="
                      background: white;
                      padding: 15px;
                      border-radius: 8px;
                      border: 2px solid #4caf50;
                    "
                  >
                    <p style="font-size: 1.2em; margin: 5px 0">
                      <strong>R²: 0.8614</strong>
                    </p>
                    <p style="font-size: 0.85em; color: #666">
                      328% improvement over Trondheim
                    </p>
                  </div>
                </div>
              </div>
            </div>
            
            <h3 style="margin-top: 15px; font-size: 1.3em;">Final Comparison</h3>
            <table class="comparison-table" style="margin-top: 10px; font-size: 0.85em;">
              <tr>
                <th style="padding: 10px;">Metric</th>
                <th style="padding: 10px;">Trondheim NN</th>
                <th style="padding: 10px;">Norway NN</th>
                <th style="padding: 10px;">Improvement</th>
              </tr>
              <tr>
                <td style="padding: 10px;"><strong>Data Size</strong></td>
                <td style="padding: 10px;">6,880 sessions</td>
                <td style="padding: 10px;">34,142 sessions</td>
                <td style="padding: 10px;">5.0×</td>
              </tr>
              <tr>
                <td style="padding: 10px;"><strong>Data Quality</strong></td>
                <td style="padding: 10px;">~80% clean</td>
                <td style="padding: 10px;">~99% clean</td>
                <td style="padding: 10px;">24%</td>
              </tr>
              <tr>
                <td style="padding: 10px;"><strong>Features</strong></td>
                <td style="padding: 10px;">15 basic</td>
                <td style="padding: 10px;">41 engineered</td>
                <td style="padding: 10px;">2.7×</td>
              </tr>
              <tr>
                <td style="padding: 10px;"><strong>Energy R²</strong></td>
                <td style="padding: 10px;">0.33</td>
                <td style="padding: 10px;"><span class="highlight-green">0.86+</span></td>
                <td style="padding: 10px;"><span class="highlight-green">Significant</span></td>
              </tr>
              <tr>
                <td style="padding: 10px;"><strong>Model Complexity</strong></td>
                <td style="padding: 10px;">~200,000 params (Deep)</td>
                <td style="padding: 10px;">~20,000 params (Efficient)</td>
                <td style="padding: 10px;">10x smaller</td>
              </tr>
            </table>
        </div>
      </div>

      <div class="slide">
        <!-- H1 Removed -->
        <h2>Conclusion</h2>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 20px; flex: 1;">
            <!-- Column 1: Key Findings -->
            <div>
                <h3 style="margin-top: 0;">Key Findings</h3>
                <div class="info-box" style="margin-top: 15px; padding: 20px;">
                    <ul style="padding-left: 20px;">
                        <li style="margin-bottom: 15px;"><strong>Data Scale is King:</strong> 5x more data (Norway) transformed a failed model (R² 0.33) into a success (R² 0.86).</li>
                        <li style="margin-bottom: 15px;"><strong>Cleanliness Matters:</strong> 99% clean data vs 80% noisy data was the primary differentiator.</li>
                        <li><strong>Behavioral Signals:</strong> User history features (<i>Average Energy</i>) were the strongest predictors.</li>
                    </ul>
                </div>
            </div>

            <!-- Column 2: Summary -->
            <div>
                <h3 style="margin-top: 0;">Summary of Results</h3>
                <table class="comparison-table" style="margin-top: 15px; font-size: 0.9em;">
                    <tr>
                        <th>Metric</th>
                        <th>Trondheim</th>
                        <th>Norway</th>
                    </tr>
                    <tr>
                        <td><strong>Dataset Size</strong></td>
                        <td>6,880</td>
                        <td>34,142</td>
                    </tr>
                    <tr>
                        <td><strong>NN Performance (R²)</strong></td>
                        <td class="bad-result">0.33 (Fail)</td>
                        <td class="good-result">0.86 (Success)</td>
                    </tr>
                    <tr>
                        <td><strong>Classification (AUC)</strong></td>
                        <td>0.95 (Good)</td>
                        <td class="good-result">0.97 (Excellent)</td>
                    </tr>
                    <tr>
                        <td><strong>Best Model</strong></td>
                        <td>LightGBM</td>
                        <td>Neural Network</td>
                    </tr>
                </table>
                <p style="margin-top: 15px; font-size: 1.1em;">
                    <strong>Final Verdict:</strong> Neural Networks require scale. For small tabular data, stick to Machine Learning Models.
                </p>
            </div>
        </div>
      </div>
      <div class="slide" style="display: flex; flex-direction: column; justify-content: center; align-items: center; border-left: 10px solid #27ae60;">
        <!-- H1 Removed -->
        <h2>Project Summary & Resources</h2>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; width: 95%; margin-top: 20px;">
          <!-- Notebook Paths -->
          <div>
            <h3 style="color: #27ae60; margin-bottom: 10px;">Analysis Notebooks</h3>
            <div class="insight-card" style="margin-bottom: 10px; padding: 10px;">
              <p style="margin: 0;"><strong>Phase 1: Trondheim Analysis</strong></p>
              <p style="font-family: monospace; font-size: 0.8em; color: #666; margin: 2px 0;">trondheim_project/Notebook1_Trondheim_Dataset.ipynb</p>
            </div>
            <div class="insight-card" style="margin-bottom: 10px; padding: 10px;">
              <p style="margin: 0;"><strong>Phase 2: Norway Success</strong></p>
              <p style="font-family: monospace; font-size: 0.8em; color: #666; margin: 2px 0;">norway_project/Notebook2_Norway_Dataset.ipynb</p>
            </div>
            <div class="insight-card" style="padding: 10px;">
              <p style="margin: 0;"><strong>Phase 3: Figures & Results</strong></p>
              <p style="font-family: monospace; font-size: 0.8em; color: #666; margin: 2px 0;">norway_project/Notebook3_Figures_Results.ipynb</p>
            </div>
          </div>

          <!-- Academic References & Data -->
          <div>
            <h3 style="color: #27ae60; margin-bottom: 10px;">References & Data</h3>
            <div class="info-box" style="font-size: 0.9em; margin-bottom: 10px;">
              <p><strong>Phase 1 Study:</strong> Residential EV Charging from Apartment Buildings</p>
              <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC8134705/" target="_blank" style="color: #2980b9; word-break: break-all;">pmc.ncbi.nlm.nih.gov/articles/PMC8134705/</a>
            </div>
            <div class="info-box" style="font-size: 0.9em; margin-bottom: 10px;">
               <p><strong>Phase 1 Dataset:</strong> Trondheim Residential Complex</p>
              <a href="https://www.kaggle.com/datasets/anshtanwar/residential-ev-chargingfrom-apartment-buildings" target="_blank" style="color: #2980b9; word-break: break-all;">kaggle.com/datasets/anshtanwar/...</a>
            </div>
            <div class="info-box" style="font-size: 0.9em;">
              <p><strong>Phase 2 Dataset:</strong> Norway EV Charging Sessions</p>
              <a href="https://data.mendeley.com/datasets/jbks2rcwyj/1" target="_blank" style="color: #2980b9; word-break: break-all;">data.mendeley.com/datasets/jbks2rcwyj/1</a>
            </div>
          </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
          <h2 style="color: #2c3e50; font-size: 1.8em; margin-bottom: 5px;">Thank You for Your Attention!</h2>
          <p style="color: #7f8c8d; font-size: 1.1em;">Questions & Discussion</p>
        </div>
      </div>
    </div>

    <!-- Interactive Presentation Script -->
    <script>
      // 1. Progress Bar Logic
      window.onscroll = function() {
        let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        let scrolled = (winScroll / height) * 100;
        document.getElementById("progressBar").style.width = scrolled + "%";
      };

      // 2. Keyboard Navigation (Presenter Mode)
      document.addEventListener('keydown', function(event) {
        const slides = document.querySelectorAll('.slide');
        let currentSlideIndex = -1;
        
        // Find current slide
        slides.forEach((slide, index) => {
          const rect = slide.getBoundingClientRect();
          if (rect.top >= -200 && rect.top < window.innerHeight / 2) {
            currentSlideIndex = index;
          }
        });

        if (currentSlideIndex === -1) currentSlideIndex = 0;

        if (event.key === 'ArrowRight' || event.key === 'ArrowDown' || event.key === ' ') {
          event.preventDefault();
          if (currentSlideIndex < slides.length - 1) {
            slides[currentSlideIndex + 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
          event.preventDefault();
          if (currentSlideIndex > 0) {
            slides[currentSlideIndex - 1].scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }
      });
    </script>
  </body>
</html>
